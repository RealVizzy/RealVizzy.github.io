// Compiled with JS++ v.0.9.2

!function(){!function(){function f(g){g.pos=new Vec2(0,0);g.dim=new Vec2(2.5,10);g.vel=new Vec2(0,0);g.bounce=false;return(g);}function m(p,q,u,z,B,C){p.pos=new Vec2(0,0);p.dim=new Vec2(2.5,10);p.vel=new Vec2(0,0);p.bounce=false;q= +q;u= +u;z= +z;B= +B;C=!!C;p.pos.x= +q;p.pos.y= +u;p.dim.x= +z;p.dim.y= +B;p.bounce=!!C;return(p);}function D(F,G,H,I,J){F.pos=new Vec2(0,0);F.dim=new Vec2(2.5,10);F.vel=new Vec2(0,0);F.bounce=false;G= +G;H= +H;I= +I;J= +J;F.pos.x= +G;F.pos.y= +H;F.dim.x= +I;F.dim.y= +J;return(F);}var params=({});window.location.search.slice(1).split("&").forEach((function(K){K=typeof K=='string'?K+'':'';var L=function(item){item=item+'';var M=item.split("=");var N=M[1];var P=(N!=null?N:"")+'';var Q=params;var R=item.split("=");var S=R[0];var U=(S!=null?S:"n")+'';var V=U+'';Q[V]=P+'';};var W=L.call(this,K);W=W;return(W);}));var X=params;var Y=X["ticks"];var Z=(Y!=null?Y:"60")+'';var aa=Z+'';var ab= +(aa|0)|0;var TICKS_PER_SECOND=ab|0;var ac=params;var ad=ac["speed"];var ae=(ad!=null?ad:"90")+'';var af=ae+'';var ag= +(af|0)|0;var SPEED=ag|0;var ah=params;var ai=ah["time"];var aj=(ai!=null?ai:"1")+'';var ak=aj+'';var al= +(ak|0)|0;var TIME=al|0;var AI=!({}).hasOwnProperty.call(params,"noai");var RAINBOW=!!({}).hasOwnProperty.call(params,"r");var MAXBOUNCEANGLE= +(3*Math.PI/12);var towards=false;var score1=0|0;var score2=0|0;function Vec2(x,y){this.x=0;this.y=0;x= +x;y= +y;this.x= +x;this.y= +y;}Vec2.prototype.am="Vec2";function PhysicsObject(){}PhysicsObject.prototype.am="PhysicsObject";function an(){var outVec2=new Vec2(0,0);outVec2.x= +(this.pos.x+50-this.dim.x/2);outVec2.y= +(this.pos.y+50-this.dim.y/2);return(outVec2);}function PhysicScene(objs){this.objects=[];for(var ao=0;ao<(objs.length|0); ++ao){var ap=objs[ao];var head=ap;Array.prototype.push.apply(this.objects,[head])|0;}}PhysicScene.prototype.am="PhysicScene";function aq(){var ar=this.objects;main:for(var index1=0;index1<(ar.length|0); ++index1){var as=this.objects;var at=index1|0;var au=as[at];var av=f(new PhysicsObject());var aw=au!=null?au:av;var head=aw;var ax=this.objects;for(var index2=0;index2<(ax.length|0); ++index2){if(index1!=index2){var ay=this.objects;var az=index2|0;var aA=ay[az];var aB=f(new PhysicsObject());var aC=aA!=null?aA:aB;var item=aC;var aD=head;var aE=aD.pos;var aF= +aE.x;var aG=head;var aH=aG.vel;var aI= +aH.x;var aJ=TICKS_PER_SECOND|0;var aK= +(aI/aJ);var aL= +(aF+aK);var aM=item;var aN=aM.pos;var aO= +aN.x;var aP=item;var aQ=aP.vel;var aR= +aQ.x;var aS=TICKS_PER_SECOND|0;var aT= +(aR/aS);var aU= +(aO+aT);var aV= +(aL-aU);var aW= +Math.abs(aV);var aX=head;var aY=aX.dim;var aZ= +aY.x;var ba= +(aZ/2);var bb=item;var bc=bb.dim;var bd= +bc.x;var be= +(bd/2);var bf= +(ba+be);var bg=!!(aW<bf);if(bg){var bh=head;var bi=bh.pos;var bj= +bi.y;var bk=head;var bl=bk.vel;var bm= +bl.y;var bn=TICKS_PER_SECOND|0;var bo= +(bm/bn);var bp= +(bj+bo);var bq=item;var br=bq.pos;var bs= +br.y;var bt=item;var bu=bt.vel;var bv= +bu.y;var bw=TICKS_PER_SECOND|0;var bx= +(bv/bw);var by= +(bs+bx);var bz= +(bp-by);var bA= +Math.abs(bz);var bB=head;var bC=bB.dim;var bD= +bC.y;var bE= +(bD/2);var bF=item;var bG=bF.dim;var bH= +bG.y;var bI= +(bH/2);var bJ= +(bE+bI);var bK=!!(bA<bJ);}var bL=!!(bg&&bK);if(bL){if(head.bounce){var relativeIntersectY= +(item.pos.y+item.vel.y/TICKS_PER_SECOND+item.dim.y/2-(head.pos.y+head.vel.y/TICKS_PER_SECOND));var normalizedRelativeIntersectionY= +((relativeIntersectY-item.dim.y/2)/(item.dim.y/2));var bounceAngle= +(normalizedRelativeIntersectionY*MAXBOUNCEANGLE);towards=!towards;head.vel.x= +((towards? -1:1)*SPEED* +Math.cos(bounceAngle));head.vel.y= +(SPEED* - +Math.sin(bounceAngle));}else {continue main;}}}}head.pos.x= +(head.pos.x+head.vel.x/TICKS_PER_SECOND);if(head.pos.y-head.dim.y/2+head.vel.y/TICKS_PER_SECOND> -50&&head.pos.y+head.dim.y/2+head.vel.y/TICKS_PER_SECOND<50){head.pos.y= +(head.pos.y+head.vel.y/TICKS_PER_SECOND);}}}function Player(x){this.physicsObject=D(new PhysicsObject(),0,0,2.5,10);x= +x;this.physicsObject.pos.x= +x;}Player.prototype.am="Player";function Ball(){this.physicsObject=m(new PhysicsObject(),0,0,2.5,2.5,true);var bM= +Math.random();var bN= +(bM*2);var bO= +Math.floor(bN);var bP=bO|0;var bQ=!!bP;towards=!!bQ;bR.call(this);}Ball.prototype.am="Ball";function bR(){this.physicsObject.vel.x= +(((towards?1:0)-0.5)*SPEED);var bS= +Math.random();var bT= +(bS*2);var bU= +Math.floor(bT);var bV= +(bU-0.5);var bW=SPEED|0;var bX= +(bV*bW);var bY=this.physicsObject;var bZ=bY.vel;bZ.y= +bX;this.physicsObject.pos.x=0;this.physicsObject.pos.y=0;}function ca(){if(this.physicsObject.pos.x+this.physicsObject.dim.x/2+this.physicsObject.vel.x/TICKS_PER_SECOND>50||this.physicsObject.pos.x-this.physicsObject.dim.x/2+this.physicsObject.vel.x/TICKS_PER_SECOND< -50){bR.call(this);if(towards){score2=score2+1|0;}else {score1=score1+1|0;}towards=!towards;}if(this.physicsObject.pos.y+this.physicsObject.dim.y/2+this.physicsObject.vel.y/TICKS_PER_SECOND>50||this.physicsObject.pos.y-this.physicsObject.dim.y/2+this.physicsObject.vel.y/TICKS_PER_SECOND< -50){this.physicsObject.vel.y= +(this.physicsObject.vel.y* -1);}}var player1=new Player( -40);var player2=new Player(40);var ball=new Ball();var physicScene=new PhysicScene([player1.physicsObject,player2.physicsObject,ball.physicsObject]);function keyDown(event){switch(event.key.toLowerCase()){case "arrowup":player1.physicsObject.vel.y= + -SPEED;break;case "arrowdown":player1.physicsObject.vel.y= +SPEED;break;case "w":if(!AI){player2.physicsObject.vel.y= + -SPEED;}break;case "s":if(!AI){player2.physicsObject.vel.y= +SPEED;}break;}}function keyUp(event){switch(event.key.toLowerCase()){case "arrowup":if(player1.physicsObject.vel.y<0){player1.physicsObject.vel.y=0;}break;case "arrowdown":if(player1.physicsObject.vel.y>0){player1.physicsObject.vel.y=0;}break;case "w":if(player2.physicsObject.vel.y<0&&!AI){player2.physicsObject.vel.y=0;}break;case "s":if(player2.physicsObject.vel.y>0&&!AI){player2.physicsObject.vel.y=0;}break;}}var frame="";var cb=physicScene;var cc=cb.objects;for(var index=0;index<(cc.length|0); ++index){var cd=physicScene;var ce=cd.objects;var cf=index|0;var cg=ce[cf];var ch=f(new PhysicsObject());var ci=cg!=null?cg:ch;var obj=ci;frame+="<div class=\""+(obj.bounce?"ball":"player")+"\" id=\"obj"+(index+"")+'\"></div>';}frame+="<div class=\"score\" id=\"s1\">"+(score1+"")+'</div>';frame+="<div class=\"score\" id=\"s2\">"+(score2+"")+'</div>';document.body.innerHTML=frame;if(RAINBOW){document.getElementById("obj0").classList.add("rainbow");document.getElementById("obj1").classList.add("rainbow");document.getElementById("obj2").classList.add("rainbow");document.getElementById("s1").classList.add("rainbow");document.getElementById("s2").classList.add("rainbow");}function tick(){if(AI){var cj=ball;var ck=cj.physicsObject;var cl=ck.pos;var cm= +cl.y;var cn=player2;var co=cn.physicsObject;var cq=co.pos;var cr= +cq.y;var cs= +(cm-cr);var ct= +Math.abs(cs);var cu=player2;var cv=cu.physicsObject;var cw=cv.dim;var cx= +cw.y;var cy= +(cx/2);var cz=!!(ct>cy);if(cz){if(ball.physicsObject.pos.y>player2.physicsObject.pos.y){player2.physicsObject.vel.y= +SPEED;}else if(ball.physicsObject.pos.y<player2.physicsObject.pos.y){player2.physicsObject.vel.y= + -SPEED;}}else {player2.physicsObject.vel.y=0;}}aq.call(physicScene);ca.call(ball);var cA=player1;var cB=cA.physicsObject;var cC=an.call(cB);var cD= +cC.x;var cE=cD+'';var cF=cE+'%';var cG=document.getElementById("obj0");var cH=cG.style;cH.left=cF;var cI=player1;var cJ=cI.physicsObject;var cK=an.call(cJ);var cL= +cK.y;var cM=cL+'';var cN=cM+'%';var cO=document.getElementById("obj0");var cP=cO.style;cP.top=cN;document.getElementById("obj0").style.width=player1.physicsObject.dim.x+'%';document.getElementById("obj0").style.height=player1.physicsObject.dim.y+'%';var cQ=player2;var cR=cQ.physicsObject;var cS=an.call(cR);var cT= +cS.x;var cU=cT+'';var cV=cU+'%';var cW=document.getElementById("obj1");var cX=cW.style;cX.left=cV;var cY=player2;var cZ=cY.physicsObject;var da=an.call(cZ);var db= +da.y;var dc=db+'';var dd=dc+'%';var de=document.getElementById("obj1");var df=de.style;df.top=dd;document.getElementById("obj1").style.width=player2.physicsObject.dim.x+'%';document.getElementById("obj1").style.height=player2.physicsObject.dim.y+'%';var dg=ball;var dh=dg.physicsObject;var di=an.call(dh);var dj= +di.x;var dk=dj+'';var dl=dk+'%';var dm=document.getElementById("obj2");var dn=dm.style;dn.left=dl;var dp=ball;var dq=dp.physicsObject;var dr=an.call(dq);var ds= +dr.y;var dt=ds+'';var du=dt+'%';var dv=document.getElementById("obj2");var dw=dv.style;dw.top=du;document.getElementById("obj2").style.width=ball.physicsObject.dim.x+'%';document.getElementById("obj2").style.height=ball.physicsObject.dim.y+'%';document.getElementById("s1").innerText=score1+"";document.getElementById("s2").innerText=score2+"";}document.body.addEventListener("keydown",(function(dx){var dy=keyDown;var dz=dy.call(this,dx);dz=dz;return(dz);}));document.body.addEventListener("keyup",(function(dA){var dB=keyUp;var dC=dB.call(this,dA);dC=dC;return(dC);}));setInterval((function(){var dD=tick;var dE=dD.call(this);dE=dE;return(dE);}),1000*TIME/TICKS_PER_SECOND);}();}();