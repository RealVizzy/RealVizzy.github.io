// Compiled with JS++ v.0.9.2

!function(){!function(){function f(g){g.pos=new Vec2(0,0);g.dim=new Vec2(2.5,10);g.halfDim=new Vec2(1.25,5);g.vel=new Vec2(0,0);g.tickVel=new Vec2(0,0);g.bounce=false;return(g);}function m(p,q,u,z,B,C){p.pos=new Vec2(0,0);p.dim=new Vec2(2.5,10);p.halfDim=new Vec2(1.25,5);p.vel=new Vec2(0,0);p.tickVel=new Vec2(0,0);p.bounce=false;q= +q;u= +u;z= +z;B= +B;C=!!C;p.pos.x= +q;p.pos.y= +u;p.dim.x= +z;p.dim.y= +B;p.halfDim.x= +(z/2);p.halfDim.y= +(B/2);p.bounce=!!C;return(p);}function D(F,G,H,I,J){F.pos=new Vec2(0,0);F.dim=new Vec2(2.5,10);F.halfDim=new Vec2(1.25,5);F.vel=new Vec2(0,0);F.tickVel=new Vec2(0,0);F.bounce=false;G= +G;H= +H;I= +I;J= +J;F.pos.x= +G;F.pos.y= +H;F.dim.x= +I;F.dim.y= +J;F.halfDim.x= +(I/2);F.halfDim.y= +(J/2);return(F);}var params=({});window.location.search.slice(1).split("&").forEach((function(K){K=typeof K=='string'?K+'':'';var L=function(item){item=item+'';var M=item.split("=");var N=M[1];var P=(N!=null?N:"")+'';var Q=params;var R=item.split("=");var S=R[0];var U=(S!=null?S:"n")+'';var V=U+'';Q[V]=P+'';};var W=L.call(this,K);W=W;return(W);}));var X=params;var Y=X["ticks"];var Z=(Y!=null?Y:"60")+'';var aa=Z+'';var ab= +(aa|0)|0;var TICKS_PER_SECOND=ab|0;var ac=params;var ad=ac["speed"];var ae=(ad!=null?ad:"90")+'';var af=ae+'';var ag= +(af|0)|0;var SPEED=ag|0;var ah=params;var ai=ah["time"];var aj=(ai!=null?ai:"1")+'';var ak=aj+'';var al= +(ak|0)|0;var TIME=al|0;var AI=!({}).hasOwnProperty.call(params,"noai");var SCORE=!({}).hasOwnProperty.call(params,"noscore");var RAINBOW=!!({}).hasOwnProperty.call(params,"r");var CANVAS=!!({}).hasOwnProperty.call(params,"c");var am=!!CANVAS;if(am){var an=params;var ao=an["width"];var ap=(ao!=null?ao:"10")+'';var aq=ap+'';var ar= +(aq|0)|0;}var as=(am?ar:1)|0;var SCREENMULTIPLIER=as|0;var MAXBOUNCEANGLE= +(3*Math.PI/12);var towards=false;var score1=0|0;var score2=0|0;function Vec2(x,y){this.x=0;this.y=0;x= +x;y= +y;this.x= +x;this.y= +y;}Vec2.prototype.at="Vec2";function PhysicsObject(){}PhysicsObject.prototype.at="PhysicsObject";function au(){var outVec2=new Vec2(0,0);outVec2.x= +(this.pos.x+50-this.halfDim.x);outVec2.y= +(this.pos.y+50-this.halfDim.y);return(outVec2);}function av(vel){vel= +vel;this.vel.x= +vel;this.tickVel.x= +(vel/TICKS_PER_SECOND);}function aw(vel){vel= +vel;this.vel.y= +vel;this.tickVel.y= +(vel/TICKS_PER_SECOND);}function PhysicScene(objs){this.objects=[];for(var ax=0;ax<(objs.length|0); ++ax){var ay=objs[ax];var head=ay;Array.prototype.push.apply(this.objects,[head])|0;}}PhysicScene.prototype.at="PhysicScene";function az(){var aA=this.objects;main:for(var index1=0;index1<(aA.length|0); ++index1){var aB=this.objects;var aC=index1|0;var aD=aB[aC];var aE=f(new PhysicsObject());var aF=aD!=null?aD:aE;var head=aF;var aG=this.objects;for(var index2=0;index2<(aG.length|0); ++index2){if(index1!=index2){var aH=this.objects;var aI=index2|0;var aJ=aH[aI];var aK=f(new PhysicsObject());var aL=aJ!=null?aJ:aK;var item=aL;var aM=head;var aN=aM.pos;var aO= +aN.x;var aP=head;var aQ=aP.tickVel;var aR= +aQ.x;var aS= +(aO+aR);var aT=item;var aU=aT.pos;var aV= +aU.x;var aW=item;var aX=aW.tickVel;var aY= +aX.x;var aZ= +(aV+aY);var ba= +(aS-aZ);var bb= +Math.abs(ba);var bc=head;var bd=bc.halfDim;var be= +bd.x;var bf=item;var bg=bf.halfDim;var bh= +bg.x;var bi= +(be+bh);var bj=!!(bb<bi);if(bj){var bk=head;var bl=bk.pos;var bm= +bl.y;var bn=head;var bo=bn.tickVel;var bp= +bo.y;var bq= +(bm+bp);var br=item;var bs=br.pos;var bt= +bs.y;var bu=item;var bv=bu.tickVel;var bw= +bv.y;var bx= +(bt+bw);var by= +(bq-bx);var bz= +Math.abs(by);var bA=head;var bB=bA.halfDim;var bC= +bB.y;var bD=item;var bE=bD.halfDim;var bF= +bE.y;var bG= +(bC+bF);var bH=!!(bz<bG);}var bI=!!(bj&&bH);if(bI){if(head.bounce){var relativeIntersectY= +(item.pos.y+item.tickVel.y+item.halfDim.y-(head.pos.y+head.tickVel.y));var normalizedRelativeIntersectionY= +((relativeIntersectY-item.halfDim.y)/item.halfDim.y);var bounceAngle= +(normalizedRelativeIntersectionY*MAXBOUNCEANGLE);towards=!towards;av.call(head,(towards? -1:1)*SPEED* +Math.cos(bounceAngle));aw.call(head,SPEED* - +Math.sin(bounceAngle));}else {continue main;}}}}head.pos.x= +(head.pos.x+head.tickVel.x);if(head.pos.y-head.halfDim.y+head.tickVel.y> -50&&head.pos.y+head.halfDim.y+head.tickVel.y<50){head.pos.y= +(head.pos.y+head.tickVel.y);}}}function Player(x){this.physicsObject=D(new PhysicsObject(),0,0,2.5,10);x= +x;this.physicsObject.pos.x= +x;}Player.prototype.at="Player";function Ball(){this.physicsObject=m(new PhysicsObject(),0,0,2.5,2.5,true);var bJ= +Math.random();var bK= +(bJ*2);var bL= +Math.floor(bK);var bM=bL|0;var bN=!!bM;towards=!!bN;bO.call(this);}Ball.prototype.at="Ball";function bO(){av.call(this.physicsObject,((towards?1:0)-0.5)*SPEED);var bP=this.physicsObject;var bQ= +Math.random();var bR= +(bQ*2);var bS= +Math.floor(bR);var bT= +(bS-0.5);var bU=SPEED|0;var bV= +(bT*bU);aw.call(bP,bV);this.physicsObject.pos.x=0;this.physicsObject.pos.y=0;}function bW(){if(this.physicsObject.pos.x+this.physicsObject.halfDim.x+this.physicsObject.tickVel.x>50||this.physicsObject.pos.x-this.physicsObject.halfDim.x+this.physicsObject.tickVel.x< -50){bO.call(this);if(towards){score2=score2+1|0;}else {score1=score1+1|0;}towards=!towards;}if(this.physicsObject.pos.y+this.physicsObject.halfDim.y+this.physicsObject.tickVel.y>50||this.physicsObject.pos.y-this.physicsObject.halfDim.y+this.physicsObject.tickVel.y< -50){aw.call(this.physicsObject,this.physicsObject.vel.y* -1);}}var player1=new Player( -40);var player2=new Player(40);var ball=new Ball();var physicScene=new PhysicScene([player1.physicsObject,player2.physicsObject,ball.physicsObject]);function keyDown(event){switch(event.key.toLowerCase()){case "arrowup":aw.call(player1.physicsObject, -SPEED);break;case "arrowdown":aw.call(player1.physicsObject,SPEED);break;case "w":if(!AI){aw.call(player2.physicsObject, -SPEED);}break;case "s":if(!AI){aw.call(player2.physicsObject,SPEED);}break;}}function keyUp(event){switch(event.key.toLowerCase()){case "arrowup":if(player1.physicsObject.vel.y<0){aw.call(player1.physicsObject,0);}break;case "arrowdown":if(player1.physicsObject.vel.y>0){aw.call(player1.physicsObject,0);}break;case "w":if(player2.physicsObject.vel.y<0&&!AI){aw.call(player2.physicsObject,0);}break;case "s":if(player2.physicsObject.vel.y>0&&!AI){aw.call(player2.physicsObject,0);}break;}}var frame="";if(!CANVAS){var bX=physicScene;var bY=bX.objects;for(var index=0;index<(bY.length|0); ++index){var bZ=physicScene;var ca=bZ.objects;var cb=index|0;var cc=ca[cb];var cd=f(new PhysicsObject());var ce=cc!=null?cc:cd;var obj=ce;frame+="<div class=\""+(obj.bounce?"ball":"player")+"\" id=\"obj"+(index+"")+'\"></div>';}if(SCORE){frame+="<div class=\"score\" id=\"s1\">"+(score1+"")+'</div>';frame+="<div class=\"score\" id=\"s2\">"+(score2+"")+'</div>';}}else {frame="<canvas id=\"mainCanvas\"></canvas>";}document.body.innerHTML=frame;var obj0=document.getElementById("obj0");var obj1=document.getElementById("obj1");var obj2=document.getElementById("obj2");var s1=document.getElementById("s1");var s2=document.getElementById("s2");var mainCanvas=document.getElementById("mainCanvas");if(!CANVAS){if(RAINBOW){obj0.classList.add("rainbow");obj1.classList.add("rainbow");obj2.classList.add("rainbow");s1.classList.add("rainbow");s2.classList.add("rainbow");}}function tick(){if(AI){var cf=ball;var cg=cf.physicsObject;var ch=cg.pos;var ci= +ch.y;var cj=player2;var ck=cj.physicsObject;var cl=ck.pos;var cm= +cl.y;var cn= +(ci-cm);var co= +Math.abs(cn);var cq=player2;var cr=cq.physicsObject;var cs=cr.halfDim;var ct= +cs.y;var cu=!!(co>ct);if(cu){if(ball.physicsObject.pos.y>player2.physicsObject.pos.y){aw.call(player2.physicsObject,SPEED);}else if(ball.physicsObject.pos.y<player2.physicsObject.pos.y){aw.call(player2.physicsObject, -SPEED);}}else {aw.call(player2.physicsObject,0);}}az.call(physicScene);bW.call(ball);if(!CANVAS){var cv=player1;var cw=cv.physicsObject;var cx=au.call(cw);var cy= +cx.x;var cz=cy+'';var cA=cz+'%';var cB=obj0;var cC=cB.style;cC.left=cA;var cD=player1;var cE=cD.physicsObject;var cF=au.call(cE);var cG= +cF.y;var cH=cG+'';var cI=cH+'%';var cJ=obj0;var cK=cJ.style;cK.top=cI;obj0.style.width=player1.physicsObject.dim.x+'%';obj0.style.height=player1.physicsObject.dim.y+'%';var cL=player2;var cM=cL.physicsObject;var cN=au.call(cM);var cO= +cN.x;var cP=cO+'';var cQ=cP+'%';var cR=obj1;var cS=cR.style;cS.left=cQ;var cT=player2;var cU=cT.physicsObject;var cV=au.call(cU);var cW= +cV.y;var cX=cW+'';var cY=cX+'%';var cZ=obj1;var da=cZ.style;da.top=cY;obj1.style.width=player2.physicsObject.dim.x+'%';obj1.style.height=player2.physicsObject.dim.y+'%';var db=ball;var dc=db.physicsObject;var dd=au.call(dc);var de= +dd.x;var df=de+'';var dg=df+'%';var dh=obj2;var di=dh.style;di.left=dg;var dj=ball;var dk=dj.physicsObject;var dl=au.call(dk);var dm= +dl.y;var dn=dm+'';var dp=dn+'%';var dq=obj2;var dr=dq.style;dr.top=dp;obj2.style.width=ball.physicsObject.dim.x+'%';obj2.style.height=ball.physicsObject.dim.y+'%';if(SCORE){s1.innerText=score1+"";s2.innerText=score2+"";}}else {var ctx=mainCanvas.getContext("2d");mainCanvas.width=100*SCREENMULTIPLIER;mainCanvas.height=100*SCREENMULTIPLIER;ctx.fillStyle="#FFFFFF";ctx.fillRect(0,0,100*SCREENMULTIPLIER,100*SCREENMULTIPLIER);ctx.fillStyle="#000000";ctx.fillRect(au.call(player1.physicsObject).x*SCREENMULTIPLIER,au.call(player1.physicsObject).y*SCREENMULTIPLIER,player1.physicsObject.dim.x*SCREENMULTIPLIER,player1.physicsObject.dim.y*SCREENMULTIPLIER);ctx.fillRect(au.call(player2.physicsObject).x*SCREENMULTIPLIER,au.call(player2.physicsObject).y*SCREENMULTIPLIER,player2.physicsObject.dim.x*SCREENMULTIPLIER,player2.physicsObject.dim.y*SCREENMULTIPLIER);ctx.fillRect(au.call(ball.physicsObject).x*SCREENMULTIPLIER,au.call(ball.physicsObject).y*SCREENMULTIPLIER,ball.physicsObject.dim.x*SCREENMULTIPLIER,ball.physicsObject.dim.y*SCREENMULTIPLIER);if(SCORE){ctx.font='48px serif';ctx.fillText(score1+"",20*SCREENMULTIPLIER,10*SCREENMULTIPLIER);ctx.fillText(score2+"",80*SCREENMULTIPLIER,10*SCREENMULTIPLIER);}}}document.body.addEventListener("keydown",(function(ds){var dt=keyDown;var du=dt.call(this,ds);du=du;return(du);}));document.body.addEventListener("keyup",(function(dv){var dw=keyUp;var dx=dw.call(this,dv);dx=dx;return(dx);}));setInterval((function(){var dy=tick;var dz=dy.call(this);dz=dz;return(dz);}),1000*TIME/TICKS_PER_SECOND);}();}();