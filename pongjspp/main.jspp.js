// Compiled with JS++ v.0.9.2

!function(){!function(){function f(g){g.pos=new Vec2(0,0);g.dim=new Vec2(2.5,10);g.vel=new Vec2(0,0);g.bounce=false;return(g);}function m(p,q,u,z,B,C){p.pos=new Vec2(0,0);p.dim=new Vec2(2.5,10);p.vel=new Vec2(0,0);p.bounce=false;q= +q;u= +u;z= +z;B= +B;C=!!C;p.pos.x= +q;p.pos.y= +u;p.dim.x= +z;p.dim.y= +B;p.bounce=!!C;return(p);}function D(F,G,H,I,J){F.pos=new Vec2(0,0);F.dim=new Vec2(2.5,10);F.vel=new Vec2(0,0);F.bounce=false;G= +G;H= +H;I= +I;J= +J;F.pos.x= +G;F.pos.y= +H;F.dim.x= +I;F.dim.y= +J;return(F);}var params=({});window.location.search.slice(1).split("&").forEach((function(K){K=typeof K=='string'?K+'':'';var L=function(item){item=item+'';var M=item.split("=");var N=M[1];var P=(N!=null?N:"")+'';var Q=params;var R=item.split("=");var S=R[0];var U=(S!=null?S:"n")+'';var V=U+'';Q[V]=P+'';};var W=L.call(this,K);W=W;return(W);}));var X=params;var Y=X["ticks"];var Z=(Y!=null?Y:"60")+'';var aa=Z+'';var ab= +(aa|0)|0;var TICKS_PER_SECOND=ab|0;var ac=params;var ad=ac["speed"];var ae=(ad!=null?ad:"90")+'';var af=ae+'';var ag= +(af|0)|0;var SPEED=ag|0;var AI=!({}).hasOwnProperty.call(params,"noai");var RAINBOW=!!({}).hasOwnProperty.call(params,"r");var MAXBOUNCEANGLE= +(3*Math.PI/12);var towards=false;var score1=0|0;var score2=0|0;function Vec2(x,y){this.x=0;this.y=0;x= +x;y= +y;this.x= +x;this.y= +y;}Vec2.prototype.ah="Vec2";function PhysicsObject(){}PhysicsObject.prototype.ah="PhysicsObject";function ai(){var outVec2=new Vec2(0,0);outVec2.x= +(this.pos.x+50-this.dim.x/2);outVec2.y= +(this.pos.y+50-this.dim.y/2);return(outVec2);}function PhysicScene(objs){this.objects=[];for(var aj=0;aj<(objs.length|0); ++aj){var ak=objs[aj];var head=ak;Array.prototype.push.apply(this.objects,[head])|0;}}PhysicScene.prototype.ah="PhysicScene";function al(){var am=this.objects;main:for(var index1=0;index1<(am.length|0); ++index1){var an=this.objects;var ao=index1|0;var ap=an[ao];var aq=f(new PhysicsObject());var ar=ap!=null?ap:aq;var head=ar;var as=this.objects;for(var index2=0;index2<(as.length|0); ++index2){if(index1!=index2){var at=this.objects;var au=index2|0;var av=at[au];var aw=f(new PhysicsObject());var ax=av!=null?av:aw;var item=ax;var ay=head;var az=ay.pos;var aA= +az.x;var aB=head;var aC=aB.vel;var aD= +aC.x;var aE=TICKS_PER_SECOND|0;var aF= +(aD/aE);var aG= +(aA+aF);var aH=item;var aI=aH.pos;var aJ= +aI.x;var aK=item;var aL=aK.vel;var aM= +aL.x;var aN=TICKS_PER_SECOND|0;var aO= +(aM/aN);var aP= +(aJ+aO);var aQ= +(aG-aP);var aR= +Math.abs(aQ);var aS=head;var aT=aS.dim;var aU= +aT.x;var aV= +(aU/2);var aW=item;var aX=aW.dim;var aY= +aX.x;var aZ= +(aY/2);var ba= +(aV+aZ);var bb=!!(aR<ba);if(bb){var bc=head;var bd=bc.pos;var be= +bd.y;var bf=head;var bg=bf.vel;var bh= +bg.y;var bi=TICKS_PER_SECOND|0;var bj= +(bh/bi);var bk= +(be+bj);var bl=item;var bm=bl.pos;var bn= +bm.y;var bo=item;var bp=bo.vel;var bq= +bp.y;var br=TICKS_PER_SECOND|0;var bs= +(bq/br);var bt= +(bn+bs);var bu= +(bk-bt);var bv= +Math.abs(bu);var bw=head;var bx=bw.dim;var by= +bx.y;var bz= +(by/2);var bA=item;var bB=bA.dim;var bC= +bB.y;var bD= +(bC/2);var bE= +(bz+bD);var bF=!!(bv<bE);}var bG=!!(bb&&bF);if(bG){if(head.bounce){var relativeIntersectY= +(item.pos.y+item.vel.y/TICKS_PER_SECOND+item.dim.y/2-(head.pos.y+head.vel.y/TICKS_PER_SECOND));var normalizedRelativeIntersectionY= +((relativeIntersectY-item.dim.y/2)/(item.dim.y/2));var bounceAngle= +(normalizedRelativeIntersectionY*MAXBOUNCEANGLE);towards=!towards;head.vel.x= +((towards? -1:1)*SPEED* +Math.cos(bounceAngle));head.vel.y= +(SPEED* - +Math.sin(bounceAngle));}else {continue main;}}}}head.pos.x= +(head.pos.x+head.vel.x/TICKS_PER_SECOND);if(head.pos.y-head.dim.y/2+head.vel.y/TICKS_PER_SECOND> -50&&head.pos.y+head.dim.y/2+head.vel.y/TICKS_PER_SECOND<50){head.pos.y= +(head.pos.y+head.vel.y/TICKS_PER_SECOND);}}}function Player(x){this.physicsObject=D(new PhysicsObject(),0,0,2.5,10);x= +x;this.physicsObject.pos.x= +x;}Player.prototype.ah="Player";function Ball(){this.physicsObject=m(new PhysicsObject(),0,0,2.5,2.5,true);var bH= +Math.random();var bI= +(bH*2);var bJ= +Math.floor(bI);var bK=bJ|0;var bL=!!bK;towards=!!bL;bM.call(this);}Ball.prototype.ah="Ball";function bM(){this.physicsObject.vel.x= +(((towards?1:0)-0.5)*SPEED);var bN= +Math.random();var bO= +(bN*2);var bP= +Math.floor(bO);var bQ= +(bP-0.5);var bR=SPEED|0;var bS= +(bQ*bR);var bT=this.physicsObject;var bU=bT.vel;bU.y= +bS;this.physicsObject.pos.x=0;this.physicsObject.pos.y=0;}function bV(){if(this.physicsObject.pos.x+this.physicsObject.dim.x/2+this.physicsObject.vel.x/TICKS_PER_SECOND>50||this.physicsObject.pos.x-this.physicsObject.dim.x/2+this.physicsObject.vel.x/TICKS_PER_SECOND< -50){bM.call(this);if(towards){score2=score2+1|0;}else {score1=score1+1|0;}towards=!towards;}if(this.physicsObject.pos.y+this.physicsObject.dim.y/2+this.physicsObject.vel.y/TICKS_PER_SECOND>50||this.physicsObject.pos.y-this.physicsObject.dim.y/2+this.physicsObject.vel.y/TICKS_PER_SECOND< -50){this.physicsObject.vel.y= +(this.physicsObject.vel.y* -1);}}var player1=new Player( -40);var player2=new Player(40);var ball=new Ball();var physicScene=new PhysicScene([player1.physicsObject,player2.physicsObject,ball.physicsObject]);function keyDown(event){switch(event.key.toLowerCase()){case "arrowup":player1.physicsObject.vel.y= + -SPEED;break;case "arrowdown":player1.physicsObject.vel.y= +SPEED;break;case "w":if(!AI){player2.physicsObject.vel.y= + -SPEED;}break;case "s":if(!AI){player2.physicsObject.vel.y= +SPEED;}break;}}function keyUp(event){switch(event.key.toLowerCase()){case "arrowup":if(player1.physicsObject.vel.y<0){player1.physicsObject.vel.y=0;}break;case "arrowdown":if(player1.physicsObject.vel.y>0){player1.physicsObject.vel.y=0;}break;case "w":if(player2.physicsObject.vel.y<0&&!AI){player2.physicsObject.vel.y=0;}break;case "s":if(player2.physicsObject.vel.y>0&&!AI){player2.physicsObject.vel.y=0;}break;}}var frame="";var bW=physicScene;var bX=bW.objects;for(var index=0;index<(bX.length|0); ++index){var bY=physicScene;var bZ=bY.objects;var ca=index|0;var cb=bZ[ca];var cc=f(new PhysicsObject());var cd=cb!=null?cb:cc;var obj=cd;frame+="<div class=\""+(obj.bounce?"ball":"player")+"\" id=\"obj"+(index+"")+'\"></div>';}frame+="<div class=\"score\" id=\"s1\">"+(score1+"")+'</div>';frame+="<div class=\"score\" id=\"s2\">"+(score2+"")+'</div>';document.body.innerHTML=frame;if(RAINBOW){document.getElementById("obj0").classList.add("rainbow");document.getElementById("obj1").classList.add("rainbow");document.getElementById("obj2").classList.add("rainbow");document.getElementById("s1").classList.add("rainbow");document.getElementById("s2").classList.add("rainbow");}function tick(){if(AI){var ce=ball;var cf=ce.physicsObject;var cg=cf.pos;var ch= +cg.y;var ci=player2;var cj=ci.physicsObject;var ck=cj.pos;var cl= +ck.y;var cm= +(ch-cl);var cn= +Math.abs(cm);var co=player2;var cq=co.physicsObject;var cr=cq.dim;var cs= +cr.y;var ct= +(cs/2);var cu=!!(cn>ct);if(cu){if(ball.physicsObject.pos.y>player2.physicsObject.pos.y){player2.physicsObject.vel.y= +SPEED;}else if(ball.physicsObject.pos.y<player2.physicsObject.pos.y){player2.physicsObject.vel.y= + -SPEED;}}else {player2.physicsObject.vel.y=0;}}al.call(physicScene);bV.call(ball);var cv=player1;var cw=cv.physicsObject;var cx=ai.call(cw);var cy= +cx.x;var cz=cy+'';var cA=cz+'%';var cB=document.getElementById("obj0");var cC=cB.style;cC.left=cA;var cD=player1;var cE=cD.physicsObject;var cF=ai.call(cE);var cG= +cF.y;var cH=cG+'';var cI=cH+'%';var cJ=document.getElementById("obj0");var cK=cJ.style;cK.top=cI;document.getElementById("obj0").style.width=player1.physicsObject.dim.x+'%';document.getElementById("obj0").style.height=player1.physicsObject.dim.y+'%';var cL=player2;var cM=cL.physicsObject;var cN=ai.call(cM);var cO= +cN.x;var cP=cO+'';var cQ=cP+'%';var cR=document.getElementById("obj1");var cS=cR.style;cS.left=cQ;var cT=player2;var cU=cT.physicsObject;var cV=ai.call(cU);var cW= +cV.y;var cX=cW+'';var cY=cX+'%';var cZ=document.getElementById("obj1");var da=cZ.style;da.top=cY;document.getElementById("obj1").style.width=player2.physicsObject.dim.x+'%';document.getElementById("obj1").style.height=player2.physicsObject.dim.y+'%';var db=ball;var dc=db.physicsObject;var dd=ai.call(dc);var de= +dd.x;var df=de+'';var dg=df+'%';var dh=document.getElementById("obj2");var di=dh.style;di.left=dg;var dj=ball;var dk=dj.physicsObject;var dl=ai.call(dk);var dm= +dl.y;var dn=dm+'';var dp=dn+'%';var dq=document.getElementById("obj2");var dr=dq.style;dr.top=dp;document.getElementById("obj2").style.width=ball.physicsObject.dim.x+'%';document.getElementById("obj2").style.height=ball.physicsObject.dim.y+'%';document.getElementById("s1").innerText=score1+"";document.getElementById("s2").innerText=score2+"";}document.body.addEventListener("keydown",(function(ds){var dt=keyDown;var du=dt.call(this,ds);du=du;return(du);}));document.body.addEventListener("keyup",(function(dv){var dw=keyUp;var dx=dw.call(this,dv);dx=dx;return(dx);}));setInterval((function(){var dy=tick;var dz=dy.call(this);dz=dz;return(dz);}),1000/TICKS_PER_SECOND);}();}();