(this["webpackJsonpvalues-common-editor"]=this["webpackJsonpvalues-common-editor"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(4),i=n.n(r),l=(n(13),n(5)),d=n(6),o=n(1),c=n(8),u=n(7),v=n(0);function h(e){return Object(v.jsxs)("div",{id:"editor",children:[Object(v.jsx)(p,{handler:e.handler,renameKeyHandler:e.renameKeyHandler,duplicateHandler:e.duplicateHandler,removeHandler:e.removeHandler,id:"json",value:e.json}),Object(v.jsx)("button",{onClick:e.saveHandler,children:"Save"})]})}function p(e){switch(typeof e.value){case"string":return Object(v.jsx)("input",{id:e.id,type:"text",value:e.value,onChange:e.handler});case"object":return e.value.constructor===Array?Object(v.jsxs)("div",{className:"nested",children:[e.value.map((function(t,n){return Object(v.jsx)("div",{className:"array",children:Object(v.jsx)(p,{handler:e.handler,renameKeyHandler:e.renameKeyHandler,duplicateHandler:e.duplicateHandler,removeHandler:e.removeHandler,id:e.id+"-"+n,value:t})},n)})),e.id.endsWith("weights")?"":Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:e.duplicateHandler,id:e.id,children:"add new"}),Object(v.jsx)("button",{onClick:e.removeHandler,id:e.id,children:"remove last"})]})]}):Object(v.jsx)("div",{className:"nested",children:Object.keys(e.value).map((function(t,n){return Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:t}),Object(v.jsx)(p,{handler:e.handler,renameKeyHandler:e.renameKeyHandler,duplicateHandler:e.duplicateHandler,removeHandler:e.removeHandler,id:e.id+"-"+t,value:e.value[t]})]},n)}))});case"number":return Object(v.jsx)("input",{onChange:e.handler,id:e.id,type:"number",value:e.value});default:return Object(v.jsx)("input",{onChange:e.handler,id:e.id,type:"text",value:JSON.stringify(e.value)})}}var j=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).changeHandler=a.changeHandler.bind(Object(o.a)(a)),a.duplicateHandler=a.duplicateHandler.bind(Object(o.a)(a)),a.saveHandler=a.saveHandler.bind(Object(o.a)(a)),a.selectJson=a.selectJson.bind(Object(o.a)(a)),a.updateEffectsAndSuch=a.updateEffectsAndSuch.bind(Object(o.a)(a)),a.removeHandler=a.removeHandler.bind(Object(o.a)(a)),a.state={selectedJson:"axes",json:{},questions:{},ideologies:{},general:{},canvas:{},buttons:{},axes:{}},a.loadFile=a.loadFile.bind(Object(o.a)(a)),a}return Object(d.a)(n,[{key:"updateEffectsAndSuch",value:function(){var e=this;this.setState({questions:this.state.questions.map((function(t){return{question:t.question,effect:Object.fromEntries(e.state.axes.map((function(e){var n;return[e.id,null!==(n=t.effect[e.id])&&void 0!==n?n:0]})))}})),ideologies:this.state.ideologies.map((function(t){return{name:t.name,stats:Object.fromEntries(e.state.axes.map((function(e){var n;return[e.id,null!==(n=t.stats[e.id])&&void 0!==n?n:0]})))}})),axes:this.state.axes.map((function(e){var t,n=e;n.weights=null!==(t=n.weights)&&void 0!==t?t:[],e.tiers.forEach((function(e,t){var a;n.weights[t]=null!==(a=n.weights[t])&&void 0!==a?a:1}));for(var a=0;a<n.weights.length-e.tiers.length;a++)n.weights.pop();return n}))})}},{key:"changeHandler",value:function(e){var t=this.state[this.state.selectedJson],n=e.target.id.slice(5).split("-").map((function(e){var t=parseInt(e);return Number.isNaN(t)?e:t})),a=Number.isNaN(parseInt(e.target.value))?e.target.value:parseInt(e.target.value);switch(n.length){case 1:t[n[0]]=a;break;case 2:t[n[0]][n[1]]=a;break;case 3:t[n[0]][n[1]][n[2]]=a;break;case 4:t[n[0]][n[1]][n[2]][n[3]]=a}var s={};s[this.state.selectedJson]=t,this.setState(s),this.updateEffectsAndSuch()}},{key:"duplicateHandler",value:function(e){var t=this.state[this.state.selectedJson],n=e.target.id.slice(5).split("-").map((function(e){var t=parseInt(e);return Number.isNaN(t)?e:t})).filter((function(e){var t;return null===(t=e.length>0)||void 0===t||t}));switch(n.length){case 0:t.push(t[t.length-1]);break;case 1:t[n[0]].push(t[n[0]][t[n[0]].length-1]);break;case 2:t[n[0]][n[1]].push(t[n[0]][n[1]][t[n[0]][n[1]].length-1]);break;case 3:t[n[0]][n[1]][n[2]].push(t[n[0]][n[1]][n[2]][t.length-1]);break;case 4:t[n[0]][n[1]][n[2]][n[3]].push(t[n[0]][n[1]][n[2]][n[3]][t.length-1])}var a={};a[this.state.selectedJson]=t,this.setState(a),this.updateEffectsAndSuch()}},{key:"removeHandler",value:function(e){var t=this.state[this.state.selectedJson],n=e.target.id.slice(5).split("-").map((function(e){var t=parseInt(e);return Number.isNaN(t)?e:t})).filter((function(e){return"string"!=typeof e||e.length>0}));switch(n.length){case 0:t.pop();break;case 1:t[n[0]].pop();break;case 2:t[n[0]][n[1]].pop();break;case 3:t[n[0]][n[1]][n[2]].pop();break;case 4:t[n[0]][n[1]][n[2]][n[3]].pop()}var a={};a[this.state.selectedJson]=t,this.setState(a),this.updateEffectsAndSuch()}},{key:"saveHandler",value:function(){var e=document.createElement("a");if(e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state[this.state.selectedJson]))),e.setAttribute("download","file.json"),document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}else e.click()}},{key:"loadFile",value:function(e){var t=this,n=["questions.json","ideologies.json","general.json","canvas.json","buttons.json","axes.json"];if(function(e){for(var t=0,a=n;t<a.length;t++){var s=a[t];if(!e.includes(s))return!1}return!0}(Array.from(e.target.files).map((function(e){return e.name})).sort())){var a=Array.from(e.target.files).sort((function(e,t){return e.name>t.name?1:-1})),s=new FileReader;s.readAsText(a[0],"UTF-8"),s.onload=function(e){var n;t.setState({axes:JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result)})},(s=new FileReader).readAsText(a[1],"UTF-8"),s.onload=function(e){var n;t.setState({buttons:JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result)})},(s=new FileReader).readAsText(a[2],"UTF-8"),s.onload=function(e){var n;t.setState({canvas:JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result)})},(s=new FileReader).readAsText(a[3],"UTF-8"),s.onload=function(e){var n;t.setState({general:JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result)})},(s=new FileReader).readAsText(a[4],"UTF-8"),s.onload=function(e){var n;t.setState({ideologies:JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result)})},(s=new FileReader).readAsText(a[5],"UTF-8"),s.onload=function(e){var n;t.setState({questions:JSON.parse(null===(n=e.target)||void 0===n?void 0:n.result)})}}else alert("need all json files")}},{key:"selectJson",value:function(e){var t;this.setState({selectedJson:null===(t=e.target)||void 0===t?void 0:t.value})}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("input",{type:"file",onChange:this.loadFile,multiple:!0}),Object(v.jsxs)("select",{name:"jsons",id:"files",value:this.state.selectedJson,onChange:this.selectJson,children:[Object(v.jsx)("option",{value:"questions",children:"questions"}),Object(v.jsx)("option",{value:"ideologies",children:"ideologies"}),Object(v.jsx)("option",{value:"general",children:"general"}),Object(v.jsx)("option",{value:"canvas",children:"canvas"}),Object(v.jsx)("option",{value:"buttons",children:"buttons"}),Object(v.jsx)("option",{value:"axes",children:"axes"})]}),Object(v.jsx)(h,{handler:this.changeHandler,duplicateHandler:this.duplicateHandler,removeHandler:this.removeHandler,json:this.state[this.state.selectedJson],saveHandler:this.saveHandler})]})}}]),n}(s.a.Component),b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(j,{})}),document.getElementById("root")),b()}},[[15,1,2]]]);
//# sourceMappingURL=main.86e6df78.chunk.js.map